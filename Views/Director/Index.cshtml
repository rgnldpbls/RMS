@using RemcSys.Models
@using rscSys_final.Models
@using ResearchManagementSystem.Areas.CreSys.ViewModels
@model Tuple<IEnumerable<FundedResearch>, IEnumerable<dynamic>>
@{
    ViewData["Title"] = "Home";
    Layout = "Director";
}
<!--funded researches-->
@{
    var groupedColleges = @Model.Item1.GroupBy(f => f.college)
    .Select(group => new
    {
        College = group.Key,
        Count = group.Count()
    }).ToList();
    var LabelsCollege = groupedColleges.Select(g => g.College).ToList();
    var DataCollege = groupedColleges.Select(g => g.Count).ToList();

    var groupedBranch = @Model.Item1.GroupBy(f => f.branch)
    .Select(group => new
    {
        Branch = group.Key,
        Count = group.Count()
    }).ToList();
    var LabelsBranch = groupedBranch.Select(g => g.Branch).ToList();
    var DataBranch = groupedBranch.Select(g => g.Count).ToList();

    var totalOngoing = Model.Item1.Where(f => f.status != "Completed").GroupBy(f => f.fr_Type)
    .Select(group => new
    {
        Type = group.Key,
        Count = group.Count()
    }).ToList();
    var LabelOngoing = totalOngoing.Select(g => g.Type).ToList();
    var DataOngoing = totalOngoing.Select(g => g.Count).ToList();



    var UFR = Model.Item1.Where(f => f.fr_Type == "University Funded Research").Count();
    var EFR = Model.Item1.Where(f => f.fr_Type == "Externally Funded Research").Count();
    var UFRL = Model.Item1.Where(f => f.fr_Type == "University Funded Research Load").Count();
    var FundedResearchesTotal = UFR + EFR + UFRL;
}


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css" rel="stylesheet" />

<style>
    body {
        background: #E8E6E6;
    }

    .info-desk-icon {
        position: absolute;
        bottom: 10%;
        right: 10%;
    }

    .info-desk-btn {
        position: fixed;
        bottom: 5%;
        right: 5%;
        width: 70px;
        height: 70px;
        border-radius: 100%;
        border: none;
        background: #850000;
    }

        .info-desk-btn:hover {
            background: #650000;
        }

    .info-head {
        background: #850000;
        color: white;
    }

    .int-reply {
        background-color: #f1f1f1;
        border-radius: 15px 15px 15px 0;
        align-self: flex-start;
        width: 50%;
        display: none;
    }

    .sel-int {
        background-color: #850000;
        border-radius: 15px 15px 0 15px;
        color: white;
        align-self: flex-end;
        width: 50%;
        display: none;
    }

    .interaction-btn {
        background: #E8E6E6;
    }

        .interaction-btn:hover {
            background: #dd7f7f;
        }

    .welcomez {
        background: #850000;
        font-family: "Poppins";
        color: #FFDB89;
    }

    .welcomezz {
        background: #850000;
        font-family: "Poppins";
        color: #FFDB89;
    }

        .welcomezz:hover {
            background: #5C0001;
        }
</style>

<!--welcome-->
<div class="welcomez container p-4 rounded-4 shadow">
    <div class="fw-bold display-6">Welcome Director!</div>
    <div class="fs-6">Check the research activity reports and summaries</div>
</div>

<!-- RMO Activities Section -->
<div class="container p-3 my-3">
    <div class="row rounded-4 p-4 flex-grow-1 shadow" style="background-color: #FFECC1; color: #901716;">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="fw-bold mb-0">RMO Activities</h4>
            <form action="/" method="post">
                <label class="form-label">Campus</label>
                <select class="form-control mb-3" id="CampusDropdown">
                    <option value="">-- Select Campus --</option>
                    <option value="Sta. Mesa (MAIN CAMPUS)">Sta. Mesa (MAIN CAMPUS)</option>
                    <option value="Taguig City (BRANCH)">Taguig City (BRANCH)</option>
                    <option value="Quezon City (BRANCH)">Quezon City (BRANCH)</option>
                    <option value="San Juan City (BRANCH)">San Juan City (BRANCH)</option>
                    <option value="Parañaque City (CAMPUS)">Parañaque City (CAMPUS)</option>
                    <option value="Bataan (BRANCH)">Bataan (BRANCH)</option>
                    <option value="Sta. Maria, Bulacan (CAMPUS)">Sta. Maria, Bulacan (CAMPUS)</option>
                    <option value="Pulilan, Bulacan (CAMPUS)">Pulilan, Bulacan (CAMPUS)</option>
                    <option value="Cabiao, Nueva Ecija (CAMPUS)">Cabiao, Nueva Ecija (CAMPUS)</option>
                    <option value="Lopez, Quezon (BRANCH)">Lopez, Quezon (BRANCH)</option>
                    <option value="Malunay, Quezon (BRANCH)">Malunay, Quezon (BRANCH)</option>
                    <option value="Unisan, Quezon (BRANCH)">Unisan, Quezon (BRANCH)</option>
                    <option value="Ragay, Camarines Sur (BRANCH)">Ragay, Camarines Sur (BRANCH)</option>
                    <option value="Sto. Tomas, Batangas (BRANCH)">Sto. Tomas, Batangas (BRANCH)</option>
                    <option value="Maragondon, Cavite (BRANCH)">Maragondon, Cavite (BRANCH)</option>
                    <option value="Bansud, Oriental Mindoro (BRANCH)">Bansud, Oriental Mindoro (BRANCH)</option>
                    <option value="Sablayan, Occidental Mindoro (BRANCH)">Sablayan, Occidental Mindoro (BRANCH)</option>
                    <option value="Biñan, Laguna (CAMPUS)">Biñan, Laguna (CAMPUS)</option>
                    <option value="San Pedro, Laguna (CAMPUS)">San Pedro, Laguna (CAMPUS)</option>
                    <option value="Sta. Rosa, Laguna (CAMPUS)">Sta. Rosa, Laguna (CAMPUS)</option>
                    <option value="Calauan, Laguna (CAMPUS)">Calauan, Laguna (CAMPUS)</option>
                </select>


            </form>

        </div>
        <canvas id="activityChart" height="540"></canvas>
    </div>
</div>

<!--calendar title-->
<div class="welcomez container p-2 rounded-2 shadow my-3">
    <div class="fs-6 text-center">RMO Calendar</div>
</div>

<!--calendar-->
<div class="container bg-white p-3 shadow rounded-4">
    <div class="upper">
        <!-- Calendar -->
        <div id="calendar"></div>
        <div class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="background: #850000;">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" style="background: #E8E6E6;">
                        <form id="eventForm">
                            <div class="mb-3">
                                <label for="event-title" class="form-label">Event Title</label>
                                <input type="text" class="form-control" id="event-title" required>
                            </div>
                            <div class="mb-3">
                                <label for="event-start" class="form-label">Start Date</label>
                                <input type="date" class="form-control" id="event-start" required>
                            </div>
                            <div class="mb-3">
                                <label for="event-end" class="form-label">End Date</label>
                                <input type="date" class="form-control" id="event-end">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--research centers and pie chart-->
<div class="container">
    <!--research centers-->
    <div class="row d-flex justify-content-between">
        <div class="col-lg-7">
            <div class="row welcomez p-2 rounded-2 shadow my-3">
                <div class="fs-6 text-center">Research Centers</div>
            </div>

            <div class="row justify-content-evenly">
                <!--Funded Researches-->
                <div class="col-lg-3 col-sm-12 text-center mb-4">
                    <button type="button" class="container btn p-0 shadow rounded-4" data-bs-toggle="modal" data-bs-target="#FundingApplicationsModal">

                        <div class="p-4 pb-2 bg-white rounded-top-4">
                            <span class="d-block fs-1 fw-bold">@FundedResearchesTotal</span>
                            <span class="fs-5 fw-bold">TOTAL</span>
                        </div>
                        <div class="p-3 rounded-bottom-4 bg-primary h-25">
                            <span class="d-block fw-bold fs-6 text-white">Funded</span>
                            <span class="fw-bold fs-6 text-white">Researches</span>
                        </div>

                    </button>
                </div>
                <!--Ethics Clearance-->
                <div class="col-lg-3 col-sm-12 text-center mb-4">
                    <button type="button" class="container btn p-0 shadow rounded-4" data-bs-toggle="modal" data-bs-target="#EthicsClearanceModal">

                        <div class="p-4 pb-2 bg-white rounded-top-4">
                            <span class="d-block fs-1 fw-bold">@ViewBag.TotalClearancesIssued</span>
                            <span class="fs-5 fw-bold">TOTAL</span>
                        </div>
                        <div class="p-3 rounded-bottom-4 bg-success h-25">
                            <span class="d-block fw-bold fs-6 text-white">Ethics</span>
                            <span class="fw-bold fs-6 text-white">Clearance</span>
                        </div>

                    </button>
                </div>
                <!--Endorsed Researches-->
                <div class="col-lg-3 col-sm-12 text-center mb-4">
                    <button type="button" class="container btn p-0 shadow rounded-4" data-bs-toggle="modal" data-bs-target="#EndorsedResearchesModal">

                        <div class="p-4 pb-2 bg-white rounded-top-4">
                            <span class="d-block fs-1 fw-bold">@ViewBag.TotalEndorsed</span>
                            <span class="fs-5 fw-bold">TOTAL</span>
                        </div>
                        <div class="p-3 rounded-bottom-4 bg-danger h-25">
                            <span class="d-block fw-bold fs-6 text-white">Endorsed</span>
                            <span class="fw-bold fs-6 text-white">Researches</span>
                        </div>

                    </button>
                </div>
                <!--Events and Linkages-->
                <div class="col-lg-3 col-sm-12 text-center mb-4">
                    <button type="button" class="container btn p-0 shadow rounded-4" data-bs-toggle="modal" data-bs-target="#EventsAndLinkagesModal">

                        <div class="p-4 pb-2 bg-white rounded-top-4">
                            <span class="d-block fs-1 fw-bold">@ViewBag.EventsAndLinkagesTotal</span>
                            <span class="fs-5 fw-bold">TOTAL</span>
                        </div>
                        <div class="p-3 rounded-bottom-4 bg-secondary h-25">
                            <span class="d-block fw-bold fs-6 text-white">Events and</span>
                            <span class="fw-bold fs-6 text-white">Linkages</span>
                        </div>

                    </button>
                </div>

            </div>
            <div class="row">
                <!--top 3 performing-->
                <div class="container p-4 rounded-4 shadow mb-3" style="background: #FFECC1;">
                    <div class="top-research-section">
                        <div class="container bg-warning rounded-4 shadow p-4 mb-3" style="font-family: Poppins">
                            <span class="fw-bold p-2 rounded-4 fs-4 shadow-sm text-white" style="background: #850000">TOP 3</span>
                            <span class="fw-bold fs-4 p-2">PERFORMING BRANCHES</span>
                        </div>
                        <ol class="top-research-list">
                            @{
                                var groupedBranches = Model.Item2
                                .GroupBy(b => b.TotalResearch)
                                .OrderByDescending(g => g.Key);
                                var curRank = 1;
                            }
                            @if (groupedBranches != null && groupedBranches.Any())
                            {
                                @foreach (var group in groupedBranches)
                                {
                                    <div class="bg-warning-subtle mb-1 p-4 rounded-4 shadow-sm rank-group rank-@curRank">
                                        @foreach (var branch in group)
                                        {
                                        <li class="rank-item d-flex" style="list-style-type: none;">
                                            <div class="rank fs-6 fw-bold me-2" style="color: #850000">@curRank.</div>
                                            <div class="branch-info">
                                                <span class="branch-name"> @branch.BranchName</span>
                                                <span class="research-count fw-bold">Total Research: @branch.TotalResearch</span>
                                            </div>
                                        </li>
                                        }

                            </div>
                                    curRank++;
                                }
                            }
                            else
                            {
                        <div class="bg-warning-subtle p-4 rounded-4 shadow-sm">
                            <li style="list-style-type: none;">

                                No top performing branches yet.

                            </li>
                        </div>
                            }
                    </ol>
                </div>
            </div>
        </div>
    </div>


    <!--pie chart-->
    <div class="col-lg-4">
        <div class="row welcomez p-2 rounded-2 shadow my-3">
            <div class="fs-6 text-center">Progress Report Per Track</div>
        </div>
        <div class="row pie-chart-container d-flex justify-content-center">
            <canvas id="myPieChart"></canvas>
        </div>
    </div>

</div>

</div>


<!--Generate Report Button-->
<a role="button" class="welcomezz container p-4 rounded-4 shadow d-flex justify-content-between align-items-center text-decoration-none" asp-controller="Director" asp-action="DirectorReportGenerateReport">
    <div>
        <div class="fw-bold fs-5" style="color: #FFDB89;">Generate Report</div>
        <div class="fs-6" style="color: #FFDB89;">See details</div>
    </div>
    <div><i class="fa-solid fa-circle-chevron-right fa-2xl" style="color: #ffdb89;"></i></div>
</a>


<!--MODALS-->
<!--FUNDED RESEARCHES-->
<div class="modal fade" id="FundingApplicationsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background: #850000;">
                <h1 class="modal-title fs-5 text-white fw-bold" id="exampleModalLabel">Funded Researches</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="background: #E8E6E6;">
                <div class="container-fluid">
                    <div class="row">
                        <!--University Funded Research-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@UFR</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-primary">
                                    <span class="d-block fw-bold fs-6 text-white">University</span>
                                    <span class="fw-bold fs-6 text-white">Funded Research</span>
                                </div>
                            </div>
                        </div>
                        <!--Externally Funded Research-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@EFR</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-primary">
                                    <span class="d-block fw-bold fs-6 text-white">Externally</span>
                                    <span class="fw-bold fs-6 text-white">Funded Research</span>
                                </div>
                            </div>
                        </div>
                        <!--University Funded Research-Load-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@UFRL</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-primary">
                                    <span class="d-block fw-bold fs-6 text-white">University Funded</span>
                                    <span class="fw-bold fs-6 text-white">Research-Load</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="background: #850000;">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>

<!--ENDORSED RESEARCHES MODAL-->
<div class="modal fade" id="EndorsedResearchesModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background: #850000;">
                <h1 class="modal-title fs-5 text-white fw-bold" id="exampleModalLabel">Endorsed Researches</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="background: #E8E6E6;">
                <div class="container-fluid">
                    <div class="row">
                        <!--Grants Endorsed-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalGrants</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-danger">
                                    <span class="d-block fw-bold fs-6 text-white">Grants</span>
                                    <span class="fw-bold fs-6 text-white">Endorsed</span>
                                </div>
                            </div>
                        </div>
                        <!--Incentives Endorsed-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalIncentives</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-danger">
                                    <span class="d-block fw-bold fs-6 text-white">Incentives</span>
                                    <span class="fw-bold fs-6 text-white">Endorsed</span>
                                </div>
                            </div>
                        </div>
                        <!--Assistance Endorsed-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalAssistance</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-danger">
                                    <span class="d-block fw-bold fs-6 text-white">Assistance</span>
                                    <span class="fw-bold fs-6 text-white">Endorsed</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="background: #850000;">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>

<!--ETHICS CLEARANCE MODAL-->
<div class="modal fade" id="EthicsClearanceModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background: #850000;">
                <h1 class="modal-title fs-5 text-white fw-bold" id="exampleModalLabel">Ethics Clearance</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="background: #E8E6E6;">
                <div class="container-fluid">
                    <div class="row">
                        <!--Ethics Clearance Applications-->
                        <div class="col-lg-3 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalEthicsApplication</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-success">
                                    <span class="d-block fw-bold fs-6 text-white">Ethics Clearance</span>
                                    <span class="fw-bold fs-6 text-white">Applications</span>
                                </div>
                            </div>
                        </div>
                        <!--Ethics Clearance Issued-->
                        <div class="col-lg-3 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalClearancesIssued</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-success">
                                    <span class="d-block fw-bold fs-6 text-white">Ethics Clearance</span>
                                    <span class="fw-bold fs-6 text-white">Issued</span>
                                </div>
                            </div>
                        </div>
                        <!--Terminal Reports-->
                        <div class="col-lg-3 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalTerminalReports</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-success">
                                    <span class="d-block fw-bold fs-6 text-white">Terminal</span>
                                    <span class="fw-bold fs-6 text-white">Reports</span>
                                </div>
                            </div>
                        </div>
                        <!--Certificate of Completion-->
                        <div class="col-lg-3 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TotalCertificatesIssued</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-success">
                                    <span class="d-block fw-bold fs-6 text-white">Certificate of</span>
                                    <span class="fw-bold fs-6 text-white">Completion</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="background: #850000;">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>

<!--EVENTS AND LINKAGES MODAL-->
<div class="modal fade" id="EventsAndLinkagesModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background: #850000;">
                <h1 class="modal-title fs-5 text-white fw-bold" id="exampleModalLabel">Events and Linkages</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="background: #E8E6E6;">
                <div class="container-fluid">
                    <div class="row welcomez p-2 rounded-2 shadow my-3">
                        <div class="fs-6 text-center">Events</div>
                    </div>
                    <div class="row">
                        <!--Total Events-->
                        <div class="col-lg-12 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.EventsTotal</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">

                                    <span class="fw-bold fs-6 text-white">Events</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!--Upcoming Events-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.UpcomingEventsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Upcoming</span>
                                    <span class="fw-bold fs-6 text-white">Events</span>
                                </div>
                            </div>
                        </div>
                        <!--Ongoing Events-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.OngoingEventsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Ongoing</span>
                                    <span class="fw-bold fs-6 text-white">Events</span>
                                </div>
                            </div>
                        </div>
                        <!--Finished Events-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.FinishedEventsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Finished</span>
                                    <span class="fw-bold fs-6 text-white">Events</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row welcomez p-2 rounded-2 shadow my-3">
                        <div class="fs-6 text-center">Linkages</div>
                    </div>
                    <div class="row">
                        <!--Total Linkages-->
                        <div class="col-lg-12 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.LinkagesTotal</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">

                                    <span class="fw-bold fs-6 text-white">Linkages</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!--Pending Contracts-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.PendingContractsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Pending</span>
                                    <span class="fw-bold fs-6 text-white">Contracts</span>
                                </div>
                            </div>
                        </div>
                        <!--Ongoing Partners-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.OngoingPartnersCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Ongoing</span>
                                    <span class="fw-bold fs-6 text-white">Partners</span>
                                </div>
                            </div>
                        </div>
                        <!--Expired Contracts-->
                        <div class="col-lg-4 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.ExpiredContractsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Expired</span>
                                    <span class="fw-bold fs-6 text-white">Contracts</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!--Terminated Contracts-->
                        <div class="col-lg-6 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.TerminatedContractsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Terminated</span>
                                    <span class="fw-bold fs-6 text-white">Contracts</span>
                                </div>
                            </div>
                        </div>
                        <!--Stakeholder Renewal-->
                        <div class="col-lg-6 col-sm-12 text-center mb-4">
                            <div class="shadow rounded-4">
                                <div class="p-4 pb-2 bg-white rounded-top-4">
                                    <span class="d-block fs-1 fw-bold">@ViewBag.ExtendedContractsCount</span>
                                    <span class="fs-5 fw-bold">TOTAL</span>
                                </div>
                                <div class="p-3 rounded-bottom-4 bg-secondary">
                                    <span class="d-block fw-bold fs-6 text-white">Stakeholder</span>
                                    <span class="fw-bold fs-6 text-white">Renewal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="background: #850000;">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>

            </div>
        </div>
    </div>
</div>




<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<!-- FullCalendar and Moment.js JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>

<!--script ni cedie for calendar-->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var modal = new bootstrap.Modal(document.querySelector('.modal'));

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
            },
            events: '/CrdlSys/Chief/GetCalendarEvents',
            eventTimeFormat: {
                hour: '2-digit',
                minute: '2-digit',
                meridiem: true
            },
            eventClick: function (info) {
                showEventDetails(info.event);
            },
            eventDidMount: function (info) {
                // Add tooltip with event details
                $(info.el).tooltip({
                    title: `
                                                ${info.event.title}
                                                Time: ${moment(info.event.start).format('hh:mm A')} - ${moment(info.event.end).format('hh:mm A')}
                                                Location: ${info.event.extendedProps.location}
                                                Type: ${info.event.extendedProps.eventType}
                                            `,
                    html: true,
                    placement: 'top',
                    trigger: 'hover',
                    container: 'body'
                });
            },
            dayMaxEvents: true, // allow "more" link when too many events
            themeSystem: 'bootstrap5',
            height: 'auto',
            contentHeight: 'auto'
        });

        calendar.render();

        function showEventDetails(event) {
            const modal = document.querySelector('.modal');
            const modalBody = modal.querySelector('.modal-body');

            // Clear previous form
            modalBody.innerHTML = `
                                        <div class="event-details">
                                            <h3 class="mb-3">${event.title}</h3>
                                            <p><strong>Date:</strong> ${moment(event.start).format('MMMM D, YYYY')}</p>
                                            <p><strong>Time:</strong> ${moment(event.start).format('hh:mm A')} - ${moment(event.end).format('hh:mm A')}</p>
                                            <p><strong>Location:</strong> ${event.extendedProps.location}</p>
                                            <p><strong>Type:</strong> ${event.extendedProps.eventType}</p>
                                            <p><strong>Description:</strong></p>
                                            <p>${event.extendedProps.description}</p>
                                        </div>
                                    `;

            // Show the modal
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
        }

        // Refresh calendar events every 5 minutes
        setInterval(function () {
            calendar.refetchEvents();
        }, 300000);
    });
</script>

<!--bar-->
<script>
    // Initialize Chart.js
    const ctx = document.getElementById('activityChart').getContext('2d');
    const activityChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [
                {
                    label: 'Research Production',
                    data: [20, 40, 50, 30, 60, 70, 40],
                    backgroundColor: '#800000',
                },
                {
                    label: 'Research Publication',
                    data: [30, 20, 40, 50, 30, 60, 120],
                    backgroundColor: '#d19a7d',
                },
                {
                    label: 'Research Presentation',
                    data: [40, 30, 20, 60, 50, 30, 70],
                    backgroundColor: '#b0b0ff',
                },
                {
                    label: 'Research Citation',
                    data: [40, 30, 20, 60, 50, 30, 70],
                    backgroundColor: '#5cbfec',
                },
            ],
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                },
            },
        },
    });
</script>

<!--pie chart-->
<script>
    // JavaScript for rendering the pie chart
    const ctx1 = document.getElementById('myPieChart').getContext('2d');

    new Chart(ctx1, {
        type: 'pie',
        data: {
            labels: ['CCIS', 'Business', 'Acc and Fin', 'EATBE', 'Educ'],
            datasets: [{
                data: [35, 20, 10, 15, 20],
                backgroundColor: ['#7F0001', '#A93226', '#CB4335', '#FADBD8', '#7F0001'],
                hoverBackgroundColor: ['#5C0001', '#8B1E26', '#B03A2E', '#F7C6C2', '#5C0001'],
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: false // Disable the legend
                },
                datalabels: {
                    color: '#000', // Label color
                    anchor: 'end', // Positions label outside the pie
                    align: 'end',  // Aligns label outside the pie
                    formatter: (value, context) => `${context.chart.data.labels[context.dataIndex]}: ${value}%`,
                    font: {
                        weight: 'bold',
                        size: 12
                    }
                }
            },
            layout: {
                padding: 50
            }
        },
        plugins: [ChartDataLabels]
    });
</script>

<!--info desk-->
<script>
    document.getElementById("interactionBtn").addEventListener("click", function () {
        document.getElementById("selectedInteraction").style.display = "block";
        document.getElementById("reply").style.display = "block";
    });
</script>



