@model ResearchManagementSystem.Areas.CreSys.ViewModels.ChiefDashboardViewModel
@{
    ViewData["Title"] = "Reports";
}
<head>
    <link rel="stylesheet" href="~/css/chief_dashboard.css" asp-append-version="true" />
    <title> Dashboard </title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <!-- CSS Files -->
    <link rel="stylesheet" href="~/css/chief_dashboard.css" asp-append-version="true" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css" rel="stylesheet">
</head>
<style>
    #calendar {
        flex: 2;
        width: 100%;
        background-color: #f8f9fa; /* Light gray */
        border-radius: 8px;
        border: 2px solid #850000;
        padding: 10px;
        margin-right: 20px;
        visibility: visible; /* Ensure it's not hidden */
    }
</style>
<!-- Main Content Area -->
<div class="dashboard-container">

    <!-- Welcome Section -->
    <div class="left-column">
        <div class="welcome-section">
            <h2>Welcome Back!</h2>
            <h1>CHIEF</h1>
            <p class="board-title">CENTER FOR RESEARCH ETHICS</p>
            <p class="urec-title">University Research Ethics Center (UREC)</p>
        </div>


        <!-- Overview Section -->
        <div class="evaluation-overview">
            <div class="overview-header">
                <h2>Ethics Clearance Application <br>OVERVIEW</h2>
            </div>
            <div class="stat-boxes">
                <div class="stat-box total-application">
                    <div class="white">
                        <span class="number">@Model.TotalApplications</span>
                        <span class="total">TOTAL</span>
                    </div>
                    <span class="label">Ethics<br>Application</span>
                </div>
                <div class="stat-box total-clearance">
                    <div class="white">
                        <span class="number">@Model.TotalClearancesIssued</span>
                        <span class="total">TOTAL</span>
                    </div>
                    <span class="label">Ethics Clearance<br>Issued</span>
                </div>
                <div class="stat-box terminal-report">
                    <div class="white">
                        <span class="number">@Model.TotalTerminalReports</span>
                        <span class="total">TOTAL</span>
                    </div>
                    <span class="label">Terminal<br>Reports</span>
                </div>
                <div class="stat-box completion-cert">
                    <div class="white">
                        <span class="number">@Model.TotalCertificatesIssued</span>
                        <span class="total">TOTAL</span>
                    </div>
                    <span class="label">Certificate<br>of Completion</span>
                </div>
            </div>
        </div>
    </div>


    <div class="right-column">
        <!-- Quick Access Menu -->
        <div class="quick-access">
            <h2>Quick Access Menu</h2>
            <div class="quick-access-grid">
                <div class="quick-access-item">
                    <div class="quick-access-icon">
                        <i class="bi bi-clipboard2-fill"></i>
                    </div>
                    <div class="quick-access-text">
                        <p class="label">List of Applications</p>
                        <p class="title">
                            <a asp-controller="Chief" asp-action="ApplicationsApprovedForEvaluation">RESEARCH ETHICS APPLICATIONS</a>
                        </p>
                    </div>
                </div>
                <div class="quick-access-item">
                    <div class="quick-access-icon">
                        <i class="bi bi-clock-fill"></i>
                    </div>
                    <div class="quick-access-text">
                        <p class="label">List of Applications</p>
                        <p class="title">
                            <a asp-controller="Chief" asp-action="PendingExemptEvaluations">APPLICATION UNDER EVALUATION</a>
                        </p>
                    </div>
                </div>
                <div class="quick-access-item">
                    <div class="quick-access-icon">
                        <i class="bi bi-clipboard2-check-fill"></i>
                    </div>
                    <div class="quick-access-text">
                        <p class="label">Generated Reports</p>
                        <p class="title">
                            <a asp-controller="Chief" asp-action="Reports">REPORTS</a>
                        </p>
                    </div>
                </div>
                <div class="quick-access-item">
                    <div class="quick-access-icon">
                        <i class="bi bi-award-fill"></i>
                    </div>
                    <div class="quick-access-text">
                        <p class="label">Completed Research</p>
                        <p class="title">
                            <a asp-controller="Chief" asp-action="CompletionReports">COMPLETION CERTIFICATE</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div id="calendar" class="calendar">
    </div>
</div>


<!-- JS Libraries -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js"></script>

<!-- Calendar Initialization -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');

        if (!calendarEl) {
            console.error('Calendar element not found!');
            return;
        }

        console.log('Initializing FullCalendar...');

        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
            },
            events: '/CreSys/Chief/GetCalendarEvents',
            eventTimeFormat: {
                hour: '2-digit',
                minute: '2-digit',
                meridiem: true
            },
            eventClick: function (info) {
                const modal = new bootstrap.Modal(document.getElementById('eventModal'));
                const modalBody = document.querySelector('.modal-body');

                if (modalBody) {
                    modalBody.innerHTML = `
                            <div>
                                <h3>${info.event.title}</h3>
                                <p><strong>Date:</strong> ${moment(info.event.start).format('MMMM D, YYYY')}</p>
                                <p><strong>Time:</strong> ${moment(info.event.start).format('hh:mm A')} - ${moment(info.event.end).format('hh:mm A')}</p>
                                <p><strong>Location:</strong> ${info.event.extendedProps.location || 'Not specified'}</p>
                                <p><strong>Description:</strong> ${info.event.extendedProps.description || 'No description'}</p>
                            </div>`;
                }

                modal.show();
            },
            dayMaxEvents: true,
            height: 'auto',
            contentHeight: 'auto',
            themeSystem: 'bootstrap5'
        });

        calendar.render();

        console.log('FullCalendar rendered successfully.');
    });
</script>
